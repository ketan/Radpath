box: bitwalker/elixir@0.0.10
build:
  steps:
      - script:
          name: set env vars
          code: export MIX_ENV=test

      # Gets the dependencies
      - script:
          name: mix deps.get
          code: |
            cd $WERCKER_SOURCE_DIR
            mix deps.get
            git clone https://github.com/elixir-lang/elixir
            cd elixir && make
            export PATH=`pwd`/elixir/bin:$PATH

      # Build the project
      - script:
          name: mix compile
          code: |
            MIX_ENV=test mix deps.update amrita
            MIX_ENV=test mix compile amrita            
            MIX_ENV=test mix compile

      # Test the project
      - script:
          name: mix amrita
          code: |
            MIX_ENV=test mix amrita --trace